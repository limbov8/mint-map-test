<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/mint-map/mint-map.html">

<dom-module id="mint-map-test-app">
  <template>
    <mint-map variables="[[variables]]" style="height: 200px"></mint-map>
  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */

    class MintMapTestApp extends Polymer.Element {
      static get is() { return 'mint-map-test-app'; }
      static get properties() {
        return {
          variables: {
            type: Array,
            notify:true,
            readOnly:false,
            value:[{ name: 'precipitation', 
                        stdname: 'atmosphere_water__one-month_time_integral_of_precipitation_leq-volume_flux', 
                        md5: '7ba0f437be4d71c812e6006ce5a65f2e', 
                        uri: 'https://mint.isi.edu/dcat/variables/atmosphere_water__one-month_time_integral_of_precipitation_leq-volume_flux?file_location=33db03abf5efa9367b390c552a24a3b3&time_range=2018-03-01T00%3A00%3A00%2F2018-04-01T00%3A00%3A00&spatial_coverage=0a4f705eb66d66ccab88e6801ce21513&short_name=precipitation'
                      },
                      { name: 'landuse', 
                        stdname: 'Land_Cover_Type', 
                        md5: '486e33f628fd222172b7d8438b9cb651', 
                        uri: 'https://mint.isi.edu/dcat/variables/Land_Cover_Type?file_location=1176557f3eeaf2b58c7cd22b877857c9&time_range=&spatial_coverage=d41d8cd98f00b204e9800998ecf8427e&short_name=landuse'
                      }]
          }
        };
      }
      ready() {
        super.ready();

        this.root.querySelector("mint-map").style.height = window.innerHeight + "px";
        window.onresize = (function() {
                  this.root.querySelector("mint-map").style.height = window.innerHeight + "px";
                  if (window._mintMap && window._mintMap.onresize) {
                      window._mintMap.onresize();
                  }
                }).bind(this);


        // mutate the array
        // setTimeout((function() {
        //           this.variables = [
        //               { name: 'precipitation', 
        //                 stdname: 'atmosphere_water__one-month_time_integral_of_precipitation_leq-volume_flux', 
        //                 md5: '7ba0f437be4d71c812e6006ce5a65f2e', 
        //                 uri: 'https://mint.isi.edu/dcat/variables/atmosphere_water__one-month_time_integral_of_precipitation_leq-volume_flux?file_location=33db03abf5efa9367b390c552a24a3b3&time_range=2018-03-01T00%3A00%3A00%2F2018-04-01T00%3A00%3A00&spatial_coverage=0a4f705eb66d66ccab88e6801ce21513&short_name=precipitation'
        //               },
        //               { name: 'soil', 
        //                 stdname: 'soil_clay__mass_fraction', 
        //                 md5: 'cf6c9df68ded66fc2c9d509d76ae22cc', 
        //                 uri: 'https://mint.isi.edu/dcat/variables/soil_clay__mass_fraction?file_location=419ba81c055973f01477a4fd97b07c78&time_range=&spatial_coverage=d41d8cd98f00b204e9800998ecf8427e&short_name=soil'
        //               }];
        //           // If readOnly
        //           // this._setVariables(['','']);
        //         }).bind(this), 15000);
      } 
    }

    //https://mint.isi.edu/dcat/variables/soil-south-sudan?file_name=https%3A%2F%2Fdrive.google.com%2Fuc%3Fexport%3Ddownload%26id%3D1fsqSxajJvS_FEwDS5oVl3Y3Kv7Qfxs0f&variable_id=s
    //https://mint.isi.edu/dcat/variables/landuse-south-sudan?file_name=https%3A%2F%2Fdrive.google.com%2Fuc%3Fexport%3Ddownload%26id%3D1eVToBB0ZLL1LGspPqju_Bo7a7yk99KJj&variable_i
    // https://mint.isi.edu/dcat/variables/precipitation-south-sudan?file_name=https%3A%2F%2Fedcintl.cr.usgs.gov%2Ffews_geoengine4%2Frest%2Fimage%2Fgeotiff%2Fdataset%2Ffewschirps%2Freg

    window.customElements.define(MintMapTestApp.is, MintMapTestApp);
  </script>
</dom-module>
